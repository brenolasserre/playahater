{"version":3,"file":"index.esm.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../node_modules/tslib/tslib.es6.js","../src/context/VideoPlayerContext.tsx","../src/components/VideoProgressBar.tsx","../src/components/VideoTimeDisplay.tsx","../src/components/VideoControls.tsx","../src/components/VideoPlayer.tsx","../src/components/VideoVolumeControl.tsx","../src/components/VideoPlaybackRateControl.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","import React, { createContext, useContext, useState, useRef, useCallback, ReactNode } from 'react';\nimport { VideoPlayerContextType } from '../types';\nimport ReactPlayer from 'react-player';\n\n// Create the context with a default value\nconst VideoPlayerContext = createContext<VideoPlayerContextType | undefined>(undefined);\n\ninterface VideoPlayerProviderProps {\n  children: ReactNode;\n  initialPlaying?: boolean;\n  initialMuted?: boolean;\n  initialVolume?: number;\n  initialPlaybackRate?: number;\n}\n\nexport const VideoPlayerProvider: React.FC<VideoPlayerProviderProps> = ({\n  children,\n  initialPlaying = false,\n  initialMuted = false,\n  initialVolume = 0.8,\n  initialPlaybackRate = 1.0,\n}) => {\n  // Player state\n  const [playing, setPlaying] = useState<boolean>(initialPlaying);\n  const [muted, setMuted] = useState<boolean>(initialMuted);\n  const [volume, setVolume] = useState<number>(initialVolume);\n  const [playbackRate, setPlaybackRate] = useState<number>(initialPlaybackRate);\n  const [played, setPlayed] = useState<number>(0);\n  const [loaded, setLoaded] = useState<number>(0);\n  const [duration, setDuration] = useState<number>(0);\n  const [seeking, setSeeking] = useState<boolean>(false);\n  const [fullscreen, setFullscreen] = useState<boolean>(false);\n  \n  // Refs\n  const playerRef = useRef<ReactPlayer | null>(null);\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  \n  // Toggle play/pause\n  const togglePlay = useCallback(() => {\n    setPlaying((prev) => !prev);\n  }, []);\n  \n  // Toggle mute\n  const toggleMute = useCallback(() => {\n    setMuted((prev) => !prev);\n  }, []);\n  \n  // Set volume (0 to 1)\n  const handleVolumeChange = useCallback((newVolume: number) => {\n    setVolume(newVolume);\n    if (newVolume === 0) {\n      setMuted(true);\n    } else if (muted) {\n      setMuted(false);\n    }\n  }, [muted]);\n  \n  // Set playback rate\n  const handlePlaybackRateChange = useCallback((rate: number) => {\n    setPlaybackRate(rate);\n  }, []);\n  \n  // Seek to a specific time\n  const seekTo = useCallback((fraction: number, type: 'seconds' | 'fraction' = 'fraction') => {\n    setSeeking(true);\n    setPlayed(fraction);\n    \n    // If seeking to the beginning (fraction is 0 or very close to 0), ensure we're playing\n    if (fraction < 0.01) {\n      setPlaying(true);\n    }\n    \n    // Try to use the player ref from the window object if available\n    const player = playerRef.current || (window as any).__playerRef;\n    \n    // Directly seek to the position in the player\n    if (player) {\n      player.seekTo(fraction, type);\n    }\n    \n    // Use a short timeout to ensure the seeking state is reset after the seek operation completes\n    setTimeout(() => setSeeking(false), 100);\n  }, [setPlaying]);\n  \n  // Toggle fullscreen\n  const toggleFullscreen = useCallback(() => {\n    if (!containerRef.current) return;\n    \n    if (!document.fullscreenElement) {\n      containerRef.current.requestFullscreen().catch((err) => {\n        console.error(`Error attempting to enable fullscreen: ${err.message}`);\n      });\n    } else {\n      document.exitFullscreen();\n    }\n  }, []);\n  \n  // Format seconds to MM:SS\n  const formatTime = useCallback((seconds: number): string => {\n    if (isNaN(seconds)) return '00:00';\n    \n    const date = new Date(seconds * 1000);\n    const hh = date.getUTCHours();\n    const mm = date.getUTCMinutes();\n    const ss = date.getUTCSeconds().toString().padStart(2, '0');\n    \n    if (hh) {\n      return `${hh}:${mm.toString().padStart(2, '0')}:${ss}`;\n    }\n    \n    return `${mm}:${ss}`;\n  }, []);\n  \n  // Handle fullscreen change events\n  React.useEffect(() => {\n    const handleFullscreenChange = () => {\n      setFullscreen(!!document.fullscreenElement);\n    };\n    \n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    \n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n    };\n  }, []);\n  \n  // Context value\n  const value: VideoPlayerContextType = {\n    playing,\n    muted,\n    volume,\n    playbackRate,\n    played,\n    loaded,\n    duration,\n    seeking,\n    fullscreen,\n    togglePlay,\n    toggleMute,\n    setVolume: handleVolumeChange,\n    setPlaybackRate: handlePlaybackRateChange,\n    seekTo,\n    toggleFullscreen,\n    formatTime,\n    setPlayed,\n    setLoaded,\n    setDuration,\n    setPlaying,\n  };\n  \n  return (\n    <VideoPlayerContext.Provider value={value}>\n      {children}\n    </VideoPlayerContext.Provider>\n  );\n};\n\n// Custom hook to use the video player context\nexport const useVideoPlayer = (): VideoPlayerContextType => {\n  const context = useContext(VideoPlayerContext);\n  \n  if (context === undefined) {\n    throw new Error('useVideoPlayer must be used within a VideoPlayerProvider');\n  }\n  \n  return context;\n};\n\nexport default VideoPlayerContext; ","import React, { useState, useRef, useEffect, useCallback, useMemo } from 'react';\nimport { useVideoPlayer } from '../context/VideoPlayerContext';\nimport { VideoProgressBarProps, Chapter } from '../types';\nimport '../styles.css';\n\nconst VideoProgressBar: React.FC<VideoProgressBarProps> = ({ \n  className = '',\n  chapters,\n  onSeek\n}) => {\n  const { played, loaded, seekTo, playing, seeking, duration, setPlaying } = useVideoPlayer();\n  const [isDragging, setIsDragging] = useState(false);\n  const [localPlayed, setLocalPlayed] = useState(played);\n  const [isHovering, setIsHovering] = useState(false);\n  const [hoverPosition, setHoverPosition] = useState<number | null>(null);\n  const [showPreview, setShowPreview] = useState(false);\n  const [wasPlayingBeforeDrag, setWasPlayingBeforeDrag] = useState(false);\n  const progressRef = useRef<HTMLDivElement>(null);\n  const playedRef = useRef<HTMLDivElement>(null);\n  const universalPlayedRef = useRef<HTMLDivElement>(null);\n  const thumbRef = useRef<HTMLDivElement>(null);\n  const tooltipRef = useRef<HTMLDivElement>(null);\n  const frameId = useRef<number | null>(null);\n  const lastUpdateTimeRef = useRef<number>(0);\n  \n  // Helper function to convert time string (mm:ss) to seconds\n  const timeStringToSeconds = useCallback((timeString: string): number => {\n    const [minutes, seconds] = timeString.split(':').map(Number);\n    return minutes * 60 + seconds;\n  }, []);\n  \n  // Process chapters data for rendering\n  const processedChapters = useMemo(() => {\n    if (!chapters || !chapters.length || !duration) return [];\n    \n    return chapters.map(chapter => {\n      const startTime = typeof chapter.start === 'string' \n        ? timeStringToSeconds(chapter.start) \n        : chapter.start;\n      \n      const endTime = typeof chapter.end === 'string' \n        ? timeStringToSeconds(chapter.end) \n        : chapter.end;\n      \n      const startFraction = startTime / duration;\n      const endFraction = endTime / duration;\n      const width = endFraction - startFraction;\n      \n      return {\n        ...chapter,\n        startTime,\n        endTime,\n        startFraction,\n        endFraction,\n        width\n      };\n    });\n  }, [chapters, duration, timeStringToSeconds]);\n  \n  // Format time for preview - memoized to avoid recalculations\n  const formatPreviewTime = useCallback((fraction: number): string => {\n    if (isNaN(duration)) return '00:00';\n    \n    const seconds = Math.floor(fraction * duration);\n    const date = new Date(seconds * 1000);\n    const mm = date.getUTCMinutes();\n    const ss = date.getUTCSeconds().toString().padStart(2, '0');\n    \n    return `${mm}:${ss}`;\n  }, [duration]);\n  \n  // Memoize the preview time to avoid recalculations during rapid movements\n  const previewTime = useMemo(() => {\n    if (!hoverPosition) return '00:00';\n    return formatPreviewTime(hoverPosition);\n  }, [hoverPosition, formatPreviewTime]);\n  \n  // Use direct DOM manipulation for smoother updates\n  const updateProgressBar = useCallback(() => {\n    if (!isDragging && !seeking && playing) {\n      setLocalPlayed(played);\n      \n      // Direct DOM manipulation for smoother updates\n      if (playedRef.current) {\n        playedRef.current.style.transform = `scaleX(${played})`;\n      }\n      if (universalPlayedRef.current) {\n        universalPlayedRef.current.style.transform = `scaleX(${played})`;\n      }\n      if (thumbRef.current) {\n        thumbRef.current.style.left = `${played * 100}%`;\n      }\n      \n      // Update segmented played progress bars\n      if (processedChapters.length > 0) {\n        processedChapters.forEach((chapter, index) => {\n          const segmentEl = document.querySelector(`[data-played-chapter=\"${index}\"]`) as HTMLElement;\n          if (segmentEl) {\n            const segmentPlayed = Math.min(1, Math.max(0, (played - chapter.startFraction) / chapter.width));\n            segmentEl.style.transform = `scaleX(${segmentPlayed})`;\n          }\n        });\n      }\n    }\n    \n    frameId.current = requestAnimationFrame(updateProgressBar);\n  }, [played, isDragging, seeking, playing, processedChapters]);\n  \n  // Initialize tooltip when component mounts\n  useEffect(() => {\n    if (tooltipRef.current) {\n      tooltipRef.current.style.opacity = '0';\n      tooltipRef.current.style.transition = 'opacity 150ms ease-in-out';\n    }\n  }, []);\n  \n  // Start and stop the animation frame loop\n  useEffect(() => {\n    frameId.current = requestAnimationFrame(updateProgressBar);\n    \n    return () => {\n      if (frameId.current) {\n        cancelAnimationFrame(frameId.current);\n        frameId.current = null;\n      }\n    };\n  }, [updateProgressBar]);\n  \n  // Update local played value when not playing or when seeking ends\n  useEffect(() => {\n    if (!playing || seeking) {\n      setLocalPlayed(played);\n      \n      // Direct DOM manipulation for smoother updates\n      if (playedRef.current) {\n        playedRef.current.style.transform = `scaleX(${played})`;\n      }\n      if (universalPlayedRef.current) {\n        universalPlayedRef.current.style.transform = `scaleX(${played})`;\n      }\n      if (thumbRef.current) {\n        thumbRef.current.style.left = `${played * 100}%`;\n      }\n      \n      // Update segmented played progress bars\n      if (processedChapters.length > 0) {\n        processedChapters.forEach((chapter, index) => {\n          const segmentEl = document.querySelector(`[data-played-chapter=\"${index}\"]`) as HTMLElement;\n          if (segmentEl) {\n            const segmentPlayed = Math.min(1, Math.max(0, (played - chapter.startFraction) / chapter.width));\n            segmentEl.style.transform = `scaleX(${segmentPlayed})`;\n          }\n        });\n      }\n    }\n  }, [played, playing, seeking, processedChapters]);\n  \n  // Calculate position from mouse event with snap-to-chapter functionality\n  const getPositionFromEvent = useCallback((e: MouseEvent | React.MouseEvent): number => {\n    if (!progressRef.current) return 0;\n    \n    const rect = progressRef.current.getBoundingClientRect();\n    const percentage = (e.clientX - rect.left) / rect.width;\n    const position = Math.min(Math.max(percentage, 0), 1);\n    \n    // Implement snap-to-chapter functionality\n    if (chapters && chapters.length && duration) {\n      // Define a snap threshold (e.g., within 1% of chapter start)\n      const snapThreshold = 0.02; \n      \n      for (const chapter of processedChapters) {\n        // Check if position is close to chapter start\n        if (Math.abs(position - chapter.startFraction) < snapThreshold) {\n          return chapter.startFraction;\n        }\n      }\n    }\n    \n    return position;\n  }, [processedChapters, chapters, duration]);\n  \n  // Update tooltip position directly from mouse event\n  const updateTooltipPosition = useCallback((e: MouseEvent | React.MouseEvent) => {\n    if (!progressRef.current || !tooltipRef.current) return 0;\n    \n    const rect = progressRef.current.getBoundingClientRect();\n    const percentage = (e.clientX - rect.left) / rect.width;\n    const position = Math.min(Math.max(percentage, 0), 1);\n    \n    // Direct DOM manipulation for tooltip position\n    tooltipRef.current.style.left = `${position * 100}%`;\n    \n    // Update tooltip text content directly\n    if (tooltipRef.current) {\n      const timeText = formatPreviewTime(position);\n      tooltipRef.current.innerHTML = timeText;\n    }\n    \n    return position;\n  }, [formatPreviewTime]);\n  \n  // Handle mouse down on progress bar\n  const handleMouseDown = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation(); // Prevent event bubbling to parent elements\n    \n    // Immediately pause the video before any other operations\n    if (playing) {\n      // Use direct DOM manipulation to pause the video immediately\n      const player = (window as any).__playerRef;\n      if (player && player.getInternalPlayer) {\n        const internalPlayer = player.getInternalPlayer();\n        if (internalPlayer && internalPlayer.pause) {\n          internalPlayer.pause();\n        }\n      }\n      \n      // Then update the state\n      setPlaying(false);\n    }\n    \n    // Store the current playing state before we start dragging\n    setWasPlayingBeforeDrag(playing);\n    \n    setIsDragging(true);\n    \n    // Set isProgressBarClick to true to prevent play/pause animation\n    if (window && typeof window !== 'undefined') {\n      (window as any).__isProgressBarClick = true;\n    }\n    \n    // Update position immediately\n    const newPosition = getPositionFromEvent(e);\n    setLocalPlayed(newPosition);\n    \n    // Use seekTo with 'fraction' type as specified in react-player docs\n    seekTo(newPosition);\n    \n    // Call onSeek callback if provided\n    if (onSeek) {\n      onSeek(newPosition);\n    }\n  }, [getPositionFromEvent, seekTo, onSeek, playing, setPlaying]);\n  \n  // Handle click on progress bar - using seekTo with 'fraction' type as per react-player docs\n  const handleProgressClick = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    e.stopPropagation(); // Prevent event bubbling to parent elements\n    \n    // Set isProgressBarClick to true to prevent play/pause animation\n    if (window && typeof window !== 'undefined') {\n      (window as any).__isProgressBarClick = true;\n    }\n    \n    const newPosition = getPositionFromEvent(e);\n    setLocalPlayed(newPosition);\n    \n    // Clear any preview debounce to prevent conflicts\n    const player = (window as any).__playerRef;\n    if (player && player._previewDebounce) {\n      clearTimeout(player._previewDebounce);\n      player._previewDebounce = null;\n    }\n    \n    // Notify that we're no longer in preview mode\n    const handlePreviewSeek = (window as any).__handlePreviewSeek;\n    if (handlePreviewSeek) {\n      handlePreviewSeek(false);\n    }\n    \n    // Use seekTo with 'fraction' type as specified in react-player docs\n    seekTo(newPosition);\n    \n    // Call onSeek callback if provided\n    if (onSeek) {\n      onSeek(newPosition);\n    }\n    \n    // Reset isProgressBarClick after a short delay\n    setTimeout(() => {\n      if (window && typeof window !== 'undefined') {\n        (window as any).__isProgressBarClick = false;\n      }\n    }, 300);\n  }, [getPositionFromEvent, seekTo, onSeek]);\n  \n  // Handle mouse move on progress bar for preview with throttling\n  const handleMouseMove = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    if (isHovering || isDragging) {\n      // Update tooltip position immediately for better responsiveness\n      const position = updateTooltipPosition(e);\n      \n      // Show tooltip immediately\n      if (tooltipRef.current) {\n        tooltipRef.current.style.opacity = '1';\n      }\n      \n      // Use requestAnimationFrame for other state updates\n      if (!frameId.current) {\n        frameId.current = requestAnimationFrame(() => {\n          // Update state (this is less critical for visual smoothness)\n          setHoverPosition(position);\n          \n          // If we're not already showing the preview, show it\n          if (!showPreview) {\n            setShowPreview(true);\n          }\n          \n          // If we're dragging, also update the played position\n          if (isDragging) {\n            setLocalPlayed(position);\n            \n            // Direct DOM manipulation for smoother updates during dragging\n            if (playedRef.current) {\n              playedRef.current.style.transform = `scaleX(${position})`;\n            }\n            if (universalPlayedRef.current) {\n              universalPlayedRef.current.style.transform = `scaleX(${position})`;\n            }\n            if (thumbRef.current) {\n              thumbRef.current.style.left = `${position * 100}%`;\n            }\n          }\n          \n          // Reset the frame ID so we can request another frame\n          frameId.current = null;\n        });\n      }\n    }\n  }, [isHovering, isDragging, updateTooltipPosition, showPreview]);\n  \n  // Handle mouse leave - just hide the tooltip without seeking\n  const handleMouseLeave = useCallback(() => {\n    setIsHovering(false);\n    setShowPreview(false);\n    setHoverPosition(null);\n    \n    // Direct DOM manipulation to hide tooltip\n    if (tooltipRef.current) {\n      tooltipRef.current.style.opacity = '0';\n    }\n  }, []);\n\n  // Handle mouse enter\n  const handleMouseEnter = useCallback(() => {\n    setIsHovering(true);\n    \n    // Initialize tooltip with opacity 0 to prepare for smooth transition\n    if (tooltipRef.current) {\n      tooltipRef.current.style.transition = 'opacity 150ms ease-in-out';\n    }\n  }, []);\n  \n  // Handle keyboard navigation\n  const handleKeyDown = useCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\n    // Handle number keys (0-9)\n    if (e.key >= '0' && e.key <= '9') {\n      const percentage = e.key === '0' ? 0 : Number(e.key) / 10;\n      seekTo(percentage);\n      \n      // Call onSeek callback if provided\n      if (onSeek) {\n        onSeek(percentage);\n      }\n    }\n    \n    // Handle arrow keys\n    if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {\n      const seconds = e.key === 'ArrowLeft' ? -5 : 5;\n      const newTime = Math.max(0, Math.min(1, played + (seconds / duration)));\n      seekTo(newTime);\n      \n      // Call onSeek callback if provided\n      if (onSeek) {\n        onSeek(newTime);\n      }\n    }\n  }, [played, seekTo, onSeek, duration]);\n  \n  // Add global event listeners for mouse move and up\n  useEffect(() => {\n    const handleGlobalMouseMove = (e: MouseEvent) => {\n      if (!isDragging) return;\n      \n      // Ensure video is paused while dragging\n      if (playing) {\n        // Use direct DOM manipulation to pause the video immediately\n        const player = (window as any).__playerRef;\n        if (player && player.getInternalPlayer) {\n          const internalPlayer = player.getInternalPlayer();\n          if (internalPlayer && internalPlayer.pause) {\n            internalPlayer.pause();\n          }\n        }\n        \n        setPlaying(false);\n      }\n      \n      // Throttle updates for better performance\n      const now = performance.now();\n      // Only update every 16ms (roughly 60fps) for smooth performance\n      if (now - lastUpdateTimeRef.current > 16) {\n        lastUpdateTimeRef.current = now;\n        \n        const newPosition = getPositionFromEvent(e);\n        setLocalPlayed(newPosition);\n        setHoverPosition(newPosition);\n        \n        // Direct DOM manipulation for smoother updates during dragging\n        if (playedRef.current) {\n          playedRef.current.style.transform = `scaleX(${newPosition})`;\n        }\n        if (universalPlayedRef.current) {\n          universalPlayedRef.current.style.transform = `scaleX(${newPosition})`;\n        }\n        if (thumbRef.current) {\n          thumbRef.current.style.left = `${newPosition * 100}%`;\n        }\n        \n        // Update segmented played progress bars\n        if (processedChapters.length > 0) {\n          processedChapters.forEach((chapter, index) => {\n            const segmentEl = document.querySelector(`[data-played-chapter=\"${index}\"]`) as HTMLElement;\n            if (segmentEl) {\n              const segmentPlayed = Math.min(1, Math.max(0, (newPosition - chapter.startFraction) / chapter.width));\n              segmentEl.style.transform = `scaleX(${segmentPlayed})`;\n            }\n          });\n        }\n      }\n    };\n    \n    const handleGlobalMouseUp = (e: MouseEvent) => {\n      if (!isDragging) return;\n      \n      const newPosition = getPositionFromEvent(e);\n      \n      // Clear any preview debounce to prevent conflicts\n      const player = (window as any).__playerRef;\n      if (player && player._previewDebounce) {\n        clearTimeout(player._previewDebounce);\n        player._previewDebounce = null;\n      }\n      \n      // Notify that we're no longer in preview mode\n      const handlePreviewSeek = (window as any).__handlePreviewSeek;\n      if (handlePreviewSeek) {\n        handlePreviewSeek(false);\n      }\n      \n      // Use seekTo with 'fraction' type as specified in react-player docs\n      seekTo(newPosition);\n      \n      // Call onSeek callback if provided\n      if (onSeek) {\n        onSeek(newPosition);\n      }\n      \n      // Set a longer delay before resuming playback to ensure the seek completes\n      setTimeout(() => {\n        // Resume playing if it was playing before dragging started\n        if (wasPlayingBeforeDrag) {\n          setPlaying(true);\n        }\n      }, 100);\n      \n      setIsDragging(false);\n      \n      // Reset isProgressBarClick after a short delay\n      setTimeout(() => {\n        if (window && typeof window !== 'undefined') {\n          (window as any).__isProgressBarClick = false;\n        }\n      }, 300);\n      \n      // Prevent event from bubbling to parent elements\n      e.stopPropagation();\n    };\n    \n    if (isDragging) {\n      window.addEventListener('mousemove', handleGlobalMouseMove, { passive: true });\n      window.addEventListener('mouseup', handleGlobalMouseUp);\n      \n      // Disable text selection while dragging\n      document.body.style.userSelect = 'none';\n    }\n    \n    return () => {\n      window.removeEventListener('mousemove', handleGlobalMouseMove);\n      window.removeEventListener('mouseup', handleGlobalMouseUp);\n      \n      // Re-enable text selection\n      document.body.style.userSelect = '';\n    };\n  }, [isDragging, getPositionFromEvent, seekTo, onSeek, wasPlayingBeforeDrag, setPlaying, playing]);\n  \n  // Add global keyboard event listeners for number keys and arrow keys\n  useEffect(() => {\n    const handleGlobalKeyDown = (e: KeyboardEvent) => {\n      // Handle number keys 0-9 for percentage jumps\n      if (e.key >= '0' && e.key <= '9') {\n        const percentage = e.key === '0' ? 0 : Number(e.key) / 10;\n        \n        setLocalPlayed(percentage);\n        seekTo(percentage);\n        \n        // Call onSeek callback if provided\n        if (onSeek) {\n          onSeek(percentage);\n        }\n      }\n      // Handle arrow keys for 5-second jumps\n      else if (e.key === 'ArrowRight') {\n        const jumpSeconds = 5;\n        const jumpFraction = jumpSeconds / duration;\n        const newPosition = Math.min(localPlayed + jumpFraction, 1);\n        \n        setLocalPlayed(newPosition);\n        seekTo(newPosition);\n      } else if (e.key === 'ArrowLeft') {\n        const jumpSeconds = 5;\n        const jumpFraction = jumpSeconds / duration;\n        const newPosition = Math.max(localPlayed - jumpFraction, 0);\n        \n        setLocalPlayed(newPosition);\n        seekTo(newPosition);\n      }\n    };\n    \n    window.addEventListener('keydown', handleGlobalKeyDown);\n    \n    return () => {\n      window.removeEventListener('keydown', handleGlobalKeyDown);\n    };\n  }, [localPlayed, seekTo, onSeek, duration]);\n  \n  // Get preview frame - simplified to just create the element\n  const getPreviewFrame = useCallback(() => {\n    return (\n      <div \n        ref={tooltipRef}\n        className=\"absolute bottom-12 bg-white/15 backdrop-blur-[8px] rounded-lg px-2 py-1 text-white text-xs transform -translate-x-1/2 pointer-events-none select-none z-20\"\n        style={{ \n          left: '0%',\n          transform: 'translateX(-50%)',\n          willChange: 'left, opacity',\n          opacity: 0,\n          transition: 'opacity 150ms ease-in-out'\n        }}\n      >\n        00:00\n      </div>\n    );\n  }, []);\n  \n  return (\n    <div \n      className=\"relative group\"\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      onMouseMove={handleMouseMove}\n      style={{ paddingTop: '24px', paddingBottom: '24px', marginTop: '-24px', marginBottom: '-24px' }}\n    >\n      <div \n        ref={progressRef}\n        className={`relative h-3 bg-transparent cursor-pointer rounded-full select-none transition-all duration-200 overflow-hidden focus:outline-none ${className}`}\n        onClick={handleProgressClick}\n        onMouseDown={handleMouseDown}\n        onKeyDown={handleKeyDown}\n        tabIndex={0}\n        aria-label=\"Video progress\"\n        aria-valuemin={0}\n        aria-valuemax={100}\n        aria-valuenow={Math.round(localPlayed * 100)}\n        role=\"slider\"\n      >\n        {/* Background showing video through gaps */}\n        <div className=\"absolute inset-0 bg-transparent\" />\n        \n        {/* Unified progress bar when no chapters */}\n        {(!chapters || chapters.length === 0) && (\n          <>\n            {/* Loaded progress */}\n            <div \n              className=\"absolute top-0 left-0 h-full bg-white/20\"\n              style={{ \n                width: `${loaded * 100}%`,\n                transform: 'translateZ(0)'\n              }}\n            />\n            \n            {/* Played progress */}\n            <div \n              ref={playedRef}\n              className=\"absolute top-0 left-0 h-full bg-white/40 origin-left\"\n              style={{ \n                width: '100%',\n                transform: `scaleX(${localPlayed})`,\n                transformOrigin: 'left',\n                willChange: 'transform',\n                transition: isDragging ? 'none' : 'transform 50ms linear'\n              }}\n            />\n          </>\n        )}\n        \n        {/* Universal played progress bar that spans the entire width */}\n        {processedChapters.length > 0 && (\n          <div \n            ref={universalPlayedRef}\n            className=\"absolute top-0 left-0 h-full bg-white/40 origin-left z-[10]\"\n            style={{ \n              width: '100%',\n              transform: `scaleX(${localPlayed})`,\n              transformOrigin: 'left',\n              willChange: 'transform',\n              transition: isDragging ? 'none' : 'transform 50ms linear',\n              visibility: 'hidden' // Hide the original universal progress bar\n            }}\n          />\n        )}\n        \n        {/* Segmented played progress that matches chapter segments */}\n        {processedChapters.length > 0 && processedChapters.map((chapter, index) => (\n          <div\n            key={`played-chapter-${index}`}\n            data-played-chapter={index}\n            className=\"absolute top-0 h-full bg-white/40 origin-left z-[11]\"\n            style={{\n              left: `${chapter.startFraction * 100}%`,\n              width: `${chapter.width * 100}%`,\n              marginRight: index < processedChapters.length - 1 ? '4px' : '0',\n              clipPath: index < processedChapters.length - 1 \n                ? `polygon(0% 0%, calc(100% - 4px) 0%, calc(100% - 4px) 100%, 0% 100%)`\n                : 'none',\n              transform: `scaleX(${Math.min(1, Math.max(0, (localPlayed - chapter.startFraction) / chapter.width))})`,\n              transformOrigin: 'left',\n              willChange: 'transform',\n              transition: isDragging ? 'none' : 'transform 50ms linear'\n            }}\n          />\n        ))}\n        \n        {/* Chapter segments with gaps */}\n        {processedChapters.length > 0 && processedChapters.map((chapter, index) => (\n          <div\n            key={`chapter-${index}`}\n            className={`absolute top-0 h-full bg-white/10 backdrop-blur-[8px] z-15 ${\n              index === processedChapters.length - 1 ? 'rounded-r-full' : ''\n            }`}\n            style={{\n              left: `${chapter.startFraction * 100}%`,\n              width: `${chapter.width * 100}%`,\n              marginRight: index < processedChapters.length - 1 ? '4px' : '0',\n              clipPath: index < processedChapters.length - 1 \n                ? `polygon(0% 0%, calc(100% - 4px) 0%, calc(100% - 4px) 100%, 0% 100%)`\n                : 'none'\n            }}\n          >\n          </div>\n        ))}\n        \n        {/* Thumb - using absolute positioning for better performance */}\n        <div \n          ref={thumbRef}\n          className=\"absolute top-1/2 w-[5px] h-full rounded shadow-md bg-white group-hover:h-[120%] group-hover:bg-white/90 z-[20]\"\n          style={{ \n            left: `${localPlayed * 100}%`,\n            transform: 'translate(-50%, -50%)',\n            willChange: 'left',\n            transition: isDragging ? 'none' : 'left 50ms linear, height 150ms ease, background-color 150ms ease'\n          }}\n        />\n      </div>\n      \n      {/* Preview tooltip - always render but control visibility with opacity */}\n      {getPreviewFrame()}\n    </div>\n  );\n};\n\nexport default React.memo(VideoProgressBar);","import React, { useEffect, useState } from 'react';\nimport { useVideoPlayer } from '../context/VideoPlayerContext';\nimport { VideoTimeDisplayProps } from '../types';\n\nconst VideoTimeDisplay: React.FC<VideoTimeDisplayProps> = ({\n  className = '',\n  showDuration = true\n}) => {\n  const { played, duration, formatTime } = useVideoPlayer();\n  const [currentTimeDisplay, setCurrentTimeDisplay] = useState('00:00');\n  const [durationDisplay, setDurationDisplay] = useState('00:00');\n  \n  // Calculate current time in seconds and update displays\n  useEffect(() => {\n    // Only update if duration is valid\n    if (duration > 0) {\n      const currentTime = duration * played;\n      setCurrentTimeDisplay(formatTime(currentTime));\n      setDurationDisplay(formatTime(duration));\n    }\n  }, [played, duration, formatTime]);\n  \n  return (\n    <div className={`text-white/60 text-sm font-mono ${className}`}>\n      <span>{currentTimeDisplay}</span>\n      {showDuration && (\n        <>\n          <span className=\"mx-1\">/</span>\n          <span>{durationDisplay}</span>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default VideoTimeDisplay; ","import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { useVideoPlayer } from '../context/VideoPlayerContext';\nimport VideoProgressBar from './VideoProgressBar';\nimport VideoTimeDisplay from './VideoTimeDisplay';\nimport { VideoControlsProps, Chapter } from '../types';\nimport '../styles.css';\n\nconst timeStringToSeconds = (timeString: string): number => {\n  const [minutes, seconds] = timeString.split(':').map(Number);\n  return minutes * 60 + seconds;\n};\n\nconst VideoControls: React.FC<VideoControlsProps> = ({\n  className = '',\n  videoTitle,\n  chapters,\n  showVolumeControl = true,\n  showProgressBar = true,\n  showFullscreenButton = false,\n  showPlaybackRateControl = false,\n  showTimeDisplay = true,\n  autoHideControls = true,\n  isHovering = false,\n  onSeek,\n}) => {\n  const {\n    playing,\n    muted,\n    toggleMute,\n    toggleFullscreen,\n    duration,\n    seekTo,\n    played,\n  } = useVideoPlayer();\n\n  const [visible, setVisible] = useState(true);\n  const [showVolumeSlider, setShowVolumeSlider] = useState(false);\n  const volumeControlRef = useRef<HTMLDivElement>(null);\n  const hideControlsTimeout = useRef<NodeJS.Timeout | null>(null);\n\n  // Get current chapter based on played time\n  const currentChapter = useMemo(() => {\n    if (!chapters || !chapters.length || !duration) return null;\n    \n    const currentTime = played * duration;\n    \n    return chapters.find(chapter => {\n      const startTime = typeof chapter.start === 'string' \n        ? timeStringToSeconds(chapter.start) \n        : chapter.start;\n      \n      const endTime = typeof chapter.end === 'string' \n        ? timeStringToSeconds(chapter.end) \n        : chapter.end;\n      \n      return currentTime >= startTime && currentTime < endTime;\n    });\n  }, [chapters, played, duration]);\n\n  // Reset the auto-hide timer\n  const resetHideTimer = useCallback(() => {\n    if (hideControlsTimeout.current) {\n      clearTimeout(hideControlsTimeout.current);\n      hideControlsTimeout.current = null;\n    }\n    \n    setVisible(true);\n    \n    if (autoHideControls && playing && !isHovering) {\n      hideControlsTimeout.current = setTimeout(() => {\n        setVisible(false);\n      }, 1000);\n    }\n  }, [autoHideControls, playing, isHovering]);\n\n  // Handle auto-hide controls\n  useEffect(() => {\n    resetHideTimer();\n    \n    return () => {\n      if (hideControlsTimeout.current) {\n        clearTimeout(hideControlsTimeout.current);\n      }\n    };\n  }, [autoHideControls, playing, isHovering, resetHideTimer]);\n\n  // Handle clicks outside volume control to hide slider\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (volumeControlRef.current && !volumeControlRef.current.contains(event.target as Node)) {\n        setShowVolumeSlider(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  // Handle volume icon click\n  const handleVolumeClick = useCallback(() => {\n    toggleMute();\n  }, [toggleMute]);\n\n  // Handle volume icon hover or click to show slider\n  const handleVolumeIconInteraction = useCallback(() => {\n    setShowVolumeSlider(true);\n  }, []);\n\n  // Handle seeking\n  const handleSeek = useCallback((fraction: number) => {\n    seekTo(fraction);\n    if (onSeek) {\n      onSeek(fraction);\n    }\n    resetHideTimer();\n  }, [seekTo, onSeek, resetHideTimer]);\n\n  // Get volume icon based on current state\n  const getVolumeIcon = useCallback(() => {\n    if (muted) return '🔇';\n    return '🔊';\n  }, [muted]);\n\n  // Instead of returning null, we'll always render the component but with CSS transitions\n  return (\n    <div \n      className={`flex flex-col w-full bg-gradient-to-t from-black/40 via-black/20 to-transparent \n        transition-all duration-150 ease-in transform origin-bottom\n        ${visible || isHovering ? 'opacity-100 translate-y-0 scale-100' : 'opacity-0 translate-y-2 scale-1 pointer-events-none'}\n        ${className}`}\n      onMouseMove={resetHideTimer}\n      onMouseEnter={resetHideTimer}\n      onClick={resetHideTimer}\n    >\n      {/* Top controls - Volume in top right */}\n      <div className=\"flex justify-between items-end w-full px-4 pb-1\">\n        \n        {/* Video title and current chapter on the left */}\n        <div className=\"flex flex-col\">\n          {videoTitle && (\n            <div className=\"text-white text-base font-medium font-inter select-none\">\n              {videoTitle}\n            </div>\n          )}\n          {currentChapter && (\n            <div className=\"text-white/70 text-sm font-normal font-inter select-none\">\n              {currentChapter.title}\n            </div>\n          )}\n        </div>\n        \n        {/* Time display */}\n        {showTimeDisplay && duration > 0 && (\n          <VideoTimeDisplay />\n        )}\n        \n      </div>\n      \n      {/* Bottom controls */}\n      <div className=\"flex flex-col w-full px-4 py-2\">\n        {/* Progress bar */}\n        {showProgressBar && (\n          <div className=\"w-full mb-2\">\n            <VideoProgressBar onSeek={handleSeek} chapters={chapters} />\n          </div>\n        )}\n        \n        {/* Bottom row with play/pause, time display, etc. */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            {/* Fullscreen button */}\n            {showFullscreenButton && (\n              <button\n                className=\"text-white focus:outline-none select-none transition-transform duration-200 hover:scale-110\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  toggleFullscreen();\n                  resetHideTimer();\n                }}\n                aria-label=\"Toggle fullscreen\"\n              >\n                ⛶\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(VideoControls); ","import React, { useRef, useEffect, useState, useCallback } from 'react';\nimport ReactPlayer from 'react-player';\nimport { VideoPlayerProps } from '../types';\nimport { VideoPlayerProvider, useVideoPlayer } from '../context/VideoPlayerContext';\nimport VideoControls from '../components/VideoControls';\nimport '../styles.css';\nconst VideoPlayerInner: React.FC<VideoPlayerProps> = ({\n  url,\n  autoPlay = false,\n  loop = false,\n  muted: initialMuted = false,\n  controls = true,\n  autoHideControls = true,\n  volume: initialVolume = 0.8,\n  playbackRate: initialPlaybackRate = 1.0,\n  width = '100%',\n  height = 'auto',\n  containerClassName = '',\n  controlsClassName = '',\n  videoClassName = '',\n  showPlayPause = false,\n  showVolumeControl = true,\n  showProgressBar = true,\n  showFullscreenButton = false,\n  showPlaybackRateControl = false,\n  showTimeDisplay = true,\n  replayIfNotLooped = true,\n  onPlay,\n  onPause,\n  onEnded,\n  onProgress,\n  onDuration,\n  onReady,\n  onError,\n  config,\n  children,\n  videoTitle,\n  chapters,\n  ...rest\n}) => {\n  const {\n    playing,\n    muted,\n    volume,\n    playbackRate,\n    togglePlay,\n    toggleMute,\n    setVolume,\n    setPlaybackRate,\n    seekTo,\n    played,\n    loaded,\n    duration,\n    seeking,\n    setPlayed,\n    setLoaded,\n    setDuration,\n    setPlaying,\n  } = useVideoPlayer();\n\n  const [isHovering, setIsHovering] = useState(false);\n  const [isReady, setIsReady] = useState(false);\n  const [hasEnded, setHasEnded] = useState(false);\n  const [isProgressBarClick, setIsProgressBarClick] = useState(false);\n  const [isSpacebarHeld, setIsSpacebarHeld] = useState(false);\n  const playerRef = useRef<ReactPlayer | null>(null);\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const [isPreviewSeeking, setIsPreviewSeeking] = useState(false);\n  const [lastPlayedPosition, setLastPlayedPosition] = useState(0);\n\n  // Handle progress updates\n  const handleProgress = useCallback((state: { played: number; playedSeconds: number; loaded: number; loadedSeconds: number }) => {\n    if (!seeking) {\n      setPlayed(state.played);\n      setLoaded(state.loaded);\n      onProgress?.(state);\n      \n      // Store the last played position when not in preview mode\n      if (!isPreviewSeeking) {\n        setLastPlayedPosition(state.played);\n      }\n      \n      // Reset ended state if video is playing again\n      if (hasEnded && state.played > 0 && state.played < 0.99) {\n        setHasEnded(false);\n      }\n    }\n  }, [seeking, setPlayed, setLoaded, onProgress, hasEnded, setHasEnded, isPreviewSeeking]);\n\n  // Handle duration updates\n  const handleDuration = useCallback((duration: number) => {\n    setDuration(duration);\n    onDuration?.(duration);\n  }, [setDuration, onDuration]);\n\n  // Handle play event\n  const handlePlay = useCallback(() => {\n    setHasEnded(false);\n    onPlay?.();\n  }, [setHasEnded, onPlay]);\n\n  // Handle pause event\n  const handlePause = useCallback(() => {\n    onPause?.();\n  }, [onPause]);\n\n  // Handle end event\n  const handleEnded = useCallback(() => {\n    if (!loop) {\n      setHasEnded(true);\n    }\n    onEnded?.();\n  }, [loop, setHasEnded, onEnded]);\n\n  // Handle ready event\n  const handleReady = useCallback(() => {\n    setIsReady(true);\n    onReady?.();\n  }, [setIsReady, onReady]);\n\n  // Handle error event\n  const handleError = useCallback((error: any) => {\n    onError?.(error);\n  }, [onError]);\n\n  // Handle replay\n  const handleReplay = useCallback(() => {\n    // First set playing to true to ensure video starts playing\n    setPlaying(true);\n    \n    // Small delay before seeking to ensure the play command is processed first\n    setTimeout(() => {\n      seekTo(0, 'fraction');\n      setHasEnded(false);\n    }, 10);\n  }, [seekTo, setPlaying, setHasEnded]);\n\n  // Set initial volume and muted state\n  useEffect(() => {\n    setVolume(initialVolume);\n  }, [initialVolume, setVolume]);\n\n  // Set initial playback rate\n  useEffect(() => {\n    setPlaybackRate(initialPlaybackRate);\n  }, [initialPlaybackRate, setPlaybackRate]);\n\n  // Handle mouse enter/leave for hover effects\n  const handleMouseEnter = useCallback(() => {\n    setIsHovering(true);\n  }, []);\n\n  const handleMouseLeave = useCallback(() => {\n    setIsHovering(false);\n  }, []);\n\n  // Handle seeking when clicking on progress bar\n  const handleSeek = useCallback((fraction: number) => {\n    // Mark that this is a progress bar click to prevent play/pause animation\n    setIsProgressBarClick(true);\n    \n    // Store the current playing state\n    const wasPlaying = playing;\n    \n    // Set seeking state to true to prevent progress updates during seeking\n    seekTo(fraction, 'fraction');\n    \n    // If we're playing, store the current position before seeking\n    if (playing) {\n      setLastPlayedPosition(played);\n    }\n    \n    // If the video was playing, ensure it continues playing after seeking\n    if (wasPlaying) {\n      // Small delay to ensure the seek completes before resuming playback\n      setTimeout(() => {\n        setPlaying(true);\n      }, 50);\n    }\n    \n    // Reset the flag after a short delay\n    setTimeout(() => {\n      setIsProgressBarClick(false);\n    }, 300);\n  }, [seekTo, playing, played, setPlaying]);\n\n  // Update player ref in context when it changes and set up preview handling\n  useEffect(() => {\n    if (playerRef.current) {\n      // This is a workaround to expose the player ref to the context\n      // We're using a property that's not in the type definition but exists in the actual object\n      (window as any).__playerRef = playerRef.current;\n      \n      // Initialize the isProgressBarClick flag\n      (window as any).__isProgressBarClick = false;\n      \n      // Add a method to handle preview seeking\n      (window as any).__handlePreviewSeek = (isPreview: boolean) => {\n        // Only change state if it's different to avoid unnecessary renders\n        if (isPreviewSeeking !== isPreview) {\n          setIsPreviewSeeking(isPreview);\n        }\n        \n        // If we're exiting preview mode and we were playing before, restore the last played position\n        if (!isPreview && playing && lastPlayedPosition > 0) {\n          // Only restore if we were actually playing\n          setTimeout(() => {\n            if (playerRef.current && playing) {\n              // Use a small timeout to ensure the UI updates first\n              playerRef.current.seekTo(lastPlayedPosition, 'fraction');\n            }\n          }, 50);\n        }\n      };\n    }\n    \n    return () => {\n      // Clean up global references when component unmounts\n      if (typeof window !== 'undefined') {\n        delete (window as any).__playerRef;\n        delete (window as any).__handlePreviewSeek;\n        delete (window as any).__isProgressBarClick;\n      }\n    };\n  }, [playerRef.current, playing, lastPlayedPosition, isPreviewSeeking]);\n\n  // Prevent default drag behavior\n  const preventDrag = useCallback((e: React.DragEvent<HTMLImageElement>) => {\n    e.preventDefault();\n  }, []);\n\n  // Add global keyboard event listeners for spacebar\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === ' ' && !e.repeat) {\n        setIsSpacebarHeld(true);\n      }\n    };\n    \n    const handleKeyUp = (e: KeyboardEvent) => {\n      if (e.key === ' ') {\n        setIsSpacebarHeld(false);\n      }\n    };\n    \n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    \n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, []);\n\n  return (\n    <div \n      ref={containerRef}\n      className={`relative overflow-hidden rounded-2xl group ${containerClassName}`}\n      style={{ width, height: height === 'auto' ? 'auto' : height }}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      onMouseMove={handleMouseEnter}\n      {...rest}\n    >\n      {/* Controls positioned above the video */}\n      {controls && (\n        <div className=\"absolute bottom-0 left-0 right-0 z-10 transition-opacity duration-300\">\n          <VideoControls\n            className={controlsClassName}\n            videoTitle={videoTitle}\n            showPlayPause={showPlayPause}\n            showVolumeControl={showVolumeControl}\n            showProgressBar={showProgressBar}\n            showFullscreenButton={showFullscreenButton}\n            showPlaybackRateControl={showPlaybackRateControl}\n            showTimeDisplay={showTimeDisplay}\n            autoHideControls={autoHideControls}\n            isHovering={isHovering || !playing}\n            chapters={chapters}\n            onSeek={handleSeek}\n          />\n        </div>\n      )}\n      \n      <ReactPlayer\n        ref={playerRef}\n        url={url}\n        playing={playing}\n        loop={loop}\n        muted={muted}\n        volume={volume}\n        playbackRate={playbackRate}\n        width=\"100%\"\n        height=\"100%\"\n        className={`react-player ${videoClassName}`}\n        onPlay={handlePlay}\n        onPause={handlePause}\n        onEnded={handleEnded}\n        onProgress={handleProgress}\n        onDuration={handleDuration}\n        onReady={handleReady}\n        onError={handleError}\n        progressInterval={33} // Update progress more frequently (approximately 30fps for smoother updates)\n        config={{\n          ...config,\n          file: {\n            ...config?.file,\n            forceVideo: true,\n            attributes: {\n              ...config?.file?.attributes,\n              controlsList: 'nodownload'\n            }\n          }\n        }}\n      />\n      \n      {/* Black overlay on hover */}\n      <div \n        className={`absolute inset-0 bg-black transition-opacity duration-250 ${isHovering || !playing || hasEnded ? 'opacity-20' : 'opacity-0'}`}\n      />\n      \n      {/* Video overlay for click to play/pause */}\n      <div \n        className=\"absolute inset-0 bg-transparent cursor-pointer flex items-center justify-center select-none\"\n        onClick={hasEnded && replayIfNotLooped ? handleReplay : togglePlay}\n        tabIndex={0}\n        aria-label={hasEnded && replayIfNotLooped ? \"Replay video\" : playing ? \"Pause video\" : \"Play video\"}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            if (hasEnded && replayIfNotLooped) {\n              handleReplay();\n            } else {\n              togglePlay();\n            }\n          }\n        }}\n      >\n        {/* Play/Pause/Replay icon overlay */}\n        <div className={`transform scale-100 select-none ease-spring duration-600 ${\n          (isHovering || hasEnded || !playing || isSpacebarHeld) && \n          (playing ? !(window as any).__isProgressBarClick : true) ? 'opacity-100 scale-100 group-active:scale-[0.95] active:scale-[0.95]' : 'opacity-0 scale-100'\n        } ${isSpacebarHeld ? 'active:scale-[0.95] scale-[0.95]' : ''}`}>\n          <div className=\"w-20 h-20 flex items-center justify-center\">\n            {hasEnded && replayIfNotLooped ? (\n              <img \n                src=\"/replay.svg\" \n                alt=\"Replay\"\n                draggable=\"false\"\n                onDragStart={preventDrag}\n                className={`w-18 h-18 transform select-none cursor-pointer shadow-xl ${isSpacebarHeld ? 'scale-[0.95]' : 'scale-100'}`}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setPlaying(true);\n                  setTimeout(() => {\n                    seekTo(0, 'fraction');\n                    setHasEnded(false);\n                  }, 10);\n                }}\n              />\n            ) : playing ? (\n              <img \n                src=\"/pause.svg\" \n                alt=\"Pause\"\n                draggable=\"false\"\n                onDragStart={preventDrag} \n                className={`w-18 h-18 transform select-none ${isSpacebarHeld ? 'scale-[0.95]' : 'scale-100'}`}\n              />\n            ) : (\n              <img \n                src=\"/play.svg\" \n                alt=\"Play\"\n                draggable=\"false\"\n                onDragStart={preventDrag} \n                className={`w-18 h-18 transform select-none ${isSpacebarHeld ? 'scale-[0.95]' : 'scale-100'}`}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n      \n      {/* Custom children (overlays, etc.) */}\n      {children}\n    </div>\n  );\n};\n\nconst VideoPlayer: React.FC<VideoPlayerProps> = (props) => {\n  return (\n    <VideoPlayerProvider\n      initialPlaying={props.autoPlay}\n      initialMuted={props.muted}\n      initialVolume={props.volume}\n      initialPlaybackRate={props.playbackRate}\n    >\n      <VideoPlayerInner {...props} />\n    </VideoPlayerProvider>\n  );\n};\n\nexport default React.memo(VideoPlayer); ","import React, { useRef, useState } from 'react';\nimport { useVideoPlayer } from '../context/VideoPlayerContext';\nimport { VideoVolumeControlProps } from '../types';\n\nconst VideoVolumeControl: React.FC<VideoVolumeControlProps> = ({ \n  className = '',\n  vertical = false \n}) => {\n  const { volume, muted, setVolume } = useVideoPlayer();\n  const volumeRef = useRef<HTMLDivElement>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  \n  // Handle click on volume bar\n  const handleVolumeClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (!volumeRef.current) return;\n    \n    const rect = volumeRef.current.getBoundingClientRect();\n    let percentage;\n    \n    if (vertical) {\n      // For vertical slider, 0 is at the bottom, 1 is at the top\n      percentage = 1 - ((e.clientY - rect.top) / rect.height);\n    } else {\n      // For horizontal slider, 0 is at the left, 1 is at the right\n      percentage = (e.clientX - rect.left) / rect.width;\n    }\n    \n    setVolume(Math.min(Math.max(percentage, 0), 1));\n  };\n  \n  // Handle mouse down on volume bar\n  const handleMouseDown = (e: React.MouseEvent<HTMLDivElement>) => {\n    setIsDragging(true);\n    handleVolumeClick(e);\n    \n    // Add event listeners for dragging\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  };\n  \n  // Handle mouse move while dragging\n  const handleMouseMove = (e: MouseEvent) => {\n    if (isDragging && volumeRef.current) {\n      const rect = volumeRef.current.getBoundingClientRect();\n      let percentage;\n      \n      if (vertical) {\n        percentage = 1 - ((e.clientY - rect.top) / rect.height);\n      } else {\n        percentage = (e.clientX - rect.left) / rect.width;\n      }\n      \n      setVolume(Math.min(Math.max(percentage, 0), 1));\n    }\n  };\n  \n  // Handle mouse up to stop dragging\n  const handleMouseUp = () => {\n    setIsDragging(false);\n    \n    // Remove event listeners\n    document.removeEventListener('mousemove', handleMouseMove);\n    document.removeEventListener('mouseup', handleMouseUp);\n  };\n  \n  // Handle keyboard navigation\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    const step = 0.1; // 10% step\n    \n    if (e.key === 'ArrowRight' || e.key === 'ArrowUp') {\n      e.preventDefault();\n      setVolume(Math.min(volume + step, 1));\n    } else if (e.key === 'ArrowLeft' || e.key === 'ArrowDown') {\n      e.preventDefault();\n      setVolume(Math.max(volume - step, 0));\n    }\n  };\n  \n  // Clean up event listeners on unmount\n  React.useEffect(() => {\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, []);\n  \n  const currentVolume = muted ? 0 : volume;\n  \n  if (vertical) {\n    return (\n      <div className={`relative w-1.5 bg-gray-600 cursor-pointer rounded-full ${className}`}>\n        <div \n          ref={volumeRef}\n          className=\"w-full h-full\"\n          onMouseDown={handleMouseDown}\n          onKeyDown={handleKeyDown}\n          tabIndex={0}\n          aria-label=\"Volume control\"\n          aria-valuemin={0}\n          aria-valuemax={100}\n          aria-valuenow={Math.round(currentVolume * 100)}\n          role=\"slider\"\n        >\n          {/* Volume level (bottom to top) */}\n          <div \n            className=\"absolute bottom-0 left-0 w-full bg-white rounded-full\"\n            style={{ height: `${currentVolume * 100}%` }}\n          />\n          \n          {/* Thumb */}\n          <div \n            className=\"absolute left-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-white shadow-md\"\n            style={{ bottom: `${currentVolume * 100}%` }}\n          />\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className={`relative h-1.5 bg-gray-600 cursor-pointer rounded-full ${className}`}>\n      <div \n        ref={volumeRef}\n        className=\"w-full h-full\"\n        onMouseDown={handleMouseDown}\n        onKeyDown={handleKeyDown}\n        tabIndex={0}\n        aria-label=\"Volume control\"\n        aria-valuemin={0}\n        aria-valuemax={100}\n        aria-valuenow={Math.round(currentVolume * 100)}\n        role=\"slider\"\n      >\n        {/* Volume level */}\n        <div \n          className=\"absolute top-0 left-0 h-full bg-white rounded-full\"\n          style={{ width: `${currentVolume * 100}%` }}\n        />\n        \n        {/* Thumb */}\n        <div \n          className=\"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-white shadow-md\"\n          style={{ left: `${currentVolume * 100}%` }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default VideoVolumeControl; ","import React, { useState, useRef, useEffect } from 'react';\nimport { useVideoPlayer } from '../context/VideoPlayerContext';\nimport { VideoPlaybackRateControlProps } from '../types';\n\nconst VideoPlaybackRateControl: React.FC<VideoPlaybackRateControlProps> = ({\n  className = '',\n  rates = [0.5, 0.75, 1, 1.25, 1.5, 2]\n}) => {\n  const { playbackRate, setPlaybackRate } = useVideoPlayer();\n  const [isOpen, setIsOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n  \n  // Toggle dropdown menu\n  const toggleMenu = () => {\n    setIsOpen(!isOpen);\n  };\n  \n  // Handle rate selection\n  const handleRateSelect = (rate: number) => {\n    setPlaybackRate(rate);\n    setIsOpen(false);\n  };\n  \n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n    \n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n  \n  // Format rate for display\n  const formatRate = (rate: number) => {\n    return rate === 1 ? 'Normal' : `${rate}x`;\n  };\n  \n  return (\n    <div ref={menuRef} className={`relative ${className}`}>\n      <button\n        type=\"button\"\n        onClick={toggleMenu}\n        className=\"p-1 text-white hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-white/50 rounded text-xs\"\n        aria-label=\"Playback speed\"\n        aria-expanded={isOpen}\n        tabIndex={0}\n      >\n        {formatRate(playbackRate)}\n      </button>\n      \n      {isOpen && (\n        <div className=\"absolute bottom-full left-0 mb-1 bg-black/90 rounded shadow-lg p-1 min-w-[80px] z-10\">\n          <ul className=\"space-y-1\">\n            {rates.map((rate) => (\n              <li key={rate}>\n                <button\n                  type=\"button\"\n                  onClick={() => handleRateSelect(rate)}\n                  className={`w-full text-left px-2 py-1 text-xs rounded ${\n                    playbackRate === rate ? 'bg-white/20 text-white' : 'text-gray-300 hover:bg-white/10'\n                  }`}\n                  tabIndex={0}\n                >\n                  {formatRate(rate)}\n                </button>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default VideoPlaybackRateControl; "],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","SuppressedError","VideoPlayerContext","createContext","undefined","VideoPlayerProvider","_a","children","_b","initialPlaying","_c","initialMuted","_d","initialVolume","_e","initialPlaybackRate","_f","useState","playing","setPlaying","_g","muted","setMuted","_h","volume","setVolume","_j","playbackRate","setPlaybackRate","_k","played","setPlayed","_l","loaded","setLoaded","_m","duration","setDuration","_o","seeking","setSeeking","_p","fullscreen","setFullscreen","playerRef","useRef","containerRef","togglePlay","useCallback","prev","toggleMute","handleVolumeChange","newVolume","handlePlaybackRateChange","rate","seekTo","fraction","player","current","window","__playerRef","setTimeout","toggleFullscreen","fullscreenElement","exitFullscreen","requestFullscreen","catch","err","console","error","concat","message","formatTime","seconds","isNaN","date","Date","hh","getUTCHours","mm","getUTCMinutes","ss","getUTCSeconds","toString","padStart","React","useEffect","handleFullscreenChange","addEventListener","removeEventListener","value","_jsx","Provider","useVideoPlayer","context","useContext","Error","VideoProgressBar$1","memo","className","chapters","onSeek","isDragging","setIsDragging","localPlayed","setLocalPlayed","isHovering","setIsHovering","hoverPosition","setHoverPosition","showPreview","setShowPreview","wasPlayingBeforeDrag","setWasPlayingBeforeDrag","progressRef","playedRef","universalPlayedRef","thumbRef","tooltipRef","frameId","lastUpdateTimeRef","timeStringToSeconds","timeString","split","map","Number","processedChapters","useMemo","chapter","startTime","start","endTime","end","startFraction","endFraction","width","formatPreviewTime","Math","floor","updateProgressBar","transform","left","forEach","index","segmentEl","querySelector","segmentPlayed","min","max","requestAnimationFrame","opacity","transition","cancelAnimationFrame","getPositionFromEvent","e","rect","getBoundingClientRect","percentage","clientX","position","_i","processedChapters_1","abs","updateTooltipPosition","timeText","innerHTML","handleMouseDown","preventDefault","stopPropagation","getInternalPlayer","internalPlayer","pause","__isProgressBarClick","newPosition","handleProgressClick","_previewDebounce","clearTimeout","handlePreviewSeek","__handlePreviewSeek","handleMouseMove","position_1","handleMouseLeave","handleMouseEnter","handleKeyDown","key","newTime","handleGlobalMouseMove","now","performance","newPosition_1","handleGlobalMouseUp","passive","body","userSelect","handleGlobalKeyDown","jumpFraction","getPreviewFrame","willChange","_jsxs","onMouseEnter","onMouseLeave","onMouseMove","paddingTop","paddingBottom","marginTop","marginBottom","onClick","onMouseDown","onKeyDown","tabIndex","round","role","_Fragment","transformOrigin","visibility","marginRight","clipPath","VideoTimeDisplay","showDuration","currentTimeDisplay","setCurrentTimeDisplay","durationDisplay","setDurationDisplay","VideoControls$1","videoTitle","showVolumeControl","showProgressBar","showFullscreenButton","showPlaybackRateControl","showTimeDisplay","autoHideControls","visible","setVisible","setShowVolumeSlider","volumeControlRef","hideControlsTimeout","currentChapter","currentTime","find","resetHideTimer","handleClickOutside","event","contains","target","handleSeek","title","VideoProgressBar","VideoPlayerInner","url","loop","controls","height","containerClassName","controlsClassName","videoClassName","_q","showPlayPause","_r","_s","_t","_u","_v","_w","replayIfNotLooped","onPlay","onPause","onEnded","onProgress","onDuration","onReady","onError","config","rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","_x","_y","_z","setIsReady","_0","hasEnded","setHasEnded","_1","setIsProgressBarClick","_2","isSpacebarHeld","setIsSpacebarHeld","_3","isPreviewSeeking","setIsPreviewSeeking","_4","lastPlayedPosition","setLastPlayedPosition","handleProgress","state","handleDuration","handlePlay","handlePause","handleEnded","handleReady","handleError","handleReplay","wasPlaying","isPreview","preventDrag","repeat","handleKeyUp","VideoControls","ReactPlayer","progressInterval","file","forceVideo","attributes","controlsList","src","alt","draggable","onDragStart","VideoPlayer$1","props","autoPlay","VideoVolumeControl","vertical","volumeRef","clientY","top","handleVolumeClick","handleMouseUp","currentVolume","bottom","VideoPlaybackRateControl","rates","isOpen","setIsOpen","menuRef","formatRate","handleRateSelect"],"mappings":"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","x_google_ignoreList":[0,1]}